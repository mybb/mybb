{% extends 'layouts/master.twig' %}

{% block head %}
    <title>{{ mybb.settings.bbname }} - {{ lang.edit_poll }}</title>
{% endblock head %}

{% block body %}
    <form action="moderation.php" method="post">
        <input type="hidden" name="my_post_key" value="{{ mybb.post_code }}" />
        <table border="0" cellspacing="{{ theme.borderwidth }}" cellpadding="{{ theme.tablespace }}" class="tborder">
            <tr>
                <td class="thead" colspan="3"><strong>{{ lang.delete_poll }}</strong></td>
            </tr>
            <tr>
                <td class="trow1" style="white-space: nowrap"><input type="checkbox" class="checkbox" name="delete" value="1" tabindex="9" /><strong>{{ lang.delete_q }}</strong></td>
                <td class="trow1" width="100%">{{ lang.delete_note }}<br /><span class="smalltext">{{ lang.delete_note2|raw }}</span></td>
                <td class="trow1" style="white-space: nowrap"><input type="submit" class="button" name="submit" value="{{ lang.delete_poll }}" tabindex="10" /></td>
            </tr>
        </table>
        <input type="hidden" name="action" value="do_deletepoll" />
        <input type="hidden" name="tid" value="{{ poll.tid }}" />
    </form>
    <br />
    <form action="polls.php" method="post">
        <input type="hidden" name="my_post_key" value="{{ mybb.post_code }}" />
        <table border="0" cellspacing="{{ theme.borderwidth }}" cellpadding="{{ theme.tablespace }}" class="tborder">
            <tr>
                <td class="thead" colspan="2"><strong>{{ lang.edit_poll }}</strong></td>
            </tr>
            {{ loginbox|raw }}
            <tr>
                <td class="trow2"><strong><label for="question">{{ lang.question }}</label></strong></td>
                <td class="trow2"><input type="text" class="textbox" name="question" id="question" size="40" maxlength="240" value="{{ select.question }}" /></td>
            </tr>
            <tr>
                <td class="trow1" valign="top"><strong><label for="numoptions">{{ lang.num_options }}</label></strong><br /><span class="smalltext">{{ lang.max_options }} {{ mybb.settings.maxpolloptions }}</span></td>
                <td class="trow1"><input type="text" class="textbox" name="numoptions" id="numoptions" size="10" value="{{ select.numoptions }}" />&nbsp;<input type="submit" class="button" name="updateoptions" value="{{ lang.update_options }}" /></td>
            </tr>
            <tr>
                <td class="trow2" valign="top"><strong>{{ lang.poll_options }}</strong></td>
                <td class="trow2"><span class="smalltext">{{ lang.poll_options_note }}</span>
                    <table border="0" cellspacing="0" cellpadding="0">
                        {% for option in optionbits %}
                            <tr>
                                <td>{{ lang.option }} {{ option.id }}:&nbsp;</td>
                                <td><input type="text" class="textbox" name="options[{{ option.id }}]" value="{{ option.value }}" /></td>
                                <td>{{ lang.votes }}&nbsp;</td>
                                <td><input type="text" class="textbox" name="votes[{{ option.id }}]" value="{{ option.votes }}" /></td>
                            </tr>
                        {% endfor %}
                    </table>
                </td>
            </tr>
            <tr>
                <td class="trow1" valign="top"><strong>{{ lang.options }}</strong></td>
                <td class="trow1"><span class="smalltext">
                    <label><input type="checkbox" class="checkbox" name="postoptions[multiple]" value="1"{% if select.postoptions.multiple %} checked="checked"{% endif %} />&nbsp;{{ lang.option_multiple|raw }}</label><br />
                    <span id="maxOptions" style="display: none"><strong>{{ lang.option_multiple_maxoptions }}</strong> <input type="text" class="textbox" name="maxoptions" value="{{ select.maxoptions }}" /><br /></span>
                    <script type="text/javascript">
                        //<!--
                            if($("input[name='postoptions[multiple]']").is(":checked")) {
                                $("#maxOptions").css("display", "");
                            }

                            $("input[name='postoptions[multiple]']").click(function() {
                                if($(this).is(":checked")) {
                                    $("#maxOptions").css("display", "");
                                } else {
                                    $("#maxOptions").css("display", "none");
                                }
                            });
                        // -->
                    </script>
                    <label><input type="checkbox" class="checkbox" name="postoptions[public]" value="1"{% if select.postoptions.public %} checked="checked"{% endif %} />&nbsp;{{ lang.option_public|raw }}</label><br />
                    <label><input type="checkbox" class="checkbox" name="postoptions[closed]" value="1"{% if select.postoptions.closed %} checked="checked"{% endif %} />&nbsp;{{ lang.option_closed|raw }}</label>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="trow2" valign="top"><strong><label for="timeout">{{ lang.poll_timeout }}</label></strong><br /><span class="smalltext">{{ lang.timeout_note }}</span></td>
                <td class="trow2"><input type="text" class="textbox" name="timeout" id="timeout" value="{{ select.timeout }}" /> {{ lang.days_after }} {{ poll.polldate }}</td>
            </tr>
        </table>
        <br />
        <div align="center"><input type="submit" class="button" name="submit" value="{{ lang.update_poll }}" /></div>
        <input type="hidden" name="action" value="do_editpoll" />
        <input type="hidden" name="pid" value="{{ poll.pid }}" />
    </form>
{% endblock body %}
