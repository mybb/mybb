!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r;r=function(){"use strict";var e=n(1),t=n(2),r=n(3),i=n(4),o=n(5);e.sceditor=t,t.commands=n(6),t.defaultOptions=n(7),t.RangeHelper=n(8),t.dom=n(9),t.ie=i.ie,t.ios=i.ios,t.isWysiwygSupported=i.isWysiwygSupported,t.regexEscape=o.regex,t.escapeEntities=o.entities,t.escapeUriScheme=o.uriScheme,t.PluginManager=r,t.plugins=r.plugins,e.fn.sceditor=function(n){var r,o,a=[];return n=n||{},n.runWithoutWysiwygSupport||i.isWysiwygSupported?(this.each(function(){r=this.jquery?this:e(this),o=r.data("sceditor"),r.parents(".sceditor-container").length>0||("state"===n?a.push(!!o):"instance"===n?a.push(o):o||new t(this,n))}),a.length?1===a.length?a[0]:e(a):this):void 0}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e){e.exports=jQuery},function(e,t,n){var r;r=function(){"use strict";var e=n(1),t=n(3),r=n(8),i=n(9),o=n(5),a=n(4),l=n(10),s=window,c=document,u=e(s),d=e(c),f=a.ie,p=f&&11>f,h=function(n,m){var g,v,b,y,x,w,C,k,E,S,T,N,O,D,R,B,H,I,M,z,L,A,P,W,_,F,q,j,V,$,Q,U,Y,K,X,G,J,Z,et,tt,nt,rt,it,ot,at,lt,st,ct,ut,dt,ft,pt,ht,mt,gt,vt,bt,yt,xt=this,wt=n.get?n.get(0):n,Ct=e(wt),kt=[],Et=[],St=[],Tt={},Nt=[],Ot={};xt.commands=e.extend(!0,{},m.commands||h.commands),xt.opts=m=e.extend({},h.defaultOptions,m),L=function(){Ct.data("sceditor",xt),e.each(m,function(t,n){e.isPlainObject(n)&&(m[t]=e.extend(!0,{},n))}),m.locale&&"en"!==m.locale&&q(),g=e('<div class="sceditor-container" />').insertAfter(Ct).css("z-index",m.zIndex),f&&g.addClass("ie ie"+f),I=!!Ct.attr("required"),Ct.removeAttr("required"),F(),Y(),j(),_(),Q(),V(),$(),a.isWysiwygSupported||xt.toggleSourceMode(),lt();var t=function(){u.unbind("load",t),m.autofocus&&ft(),m.autoExpand&&xt.expandToContent(),ot(),O.call("ready")};u.load(t),c.readyState&&"complete"===c.readyState&&t()},F=function(){var n=m.plugins;n=n?n.toString().split(","):[],O=new t(xt),e.each(n,function(t,n){O.register(e.trim(n))})},q=function(){var e;T=h.locale[m.locale],T||(e=m.locale.split("-"),T=h.locale[e[0]]),T&&T.dateFormat&&(m.dateFormat=T.dateFormat)},_=function(){var t,n;C=e("<textarea></textarea>").hide(),b=e('<iframe frameborder="0" allowfullscreen="true"></iframe>'),m.spellcheck||C.attr("spellcheck","false"),"https:"===s.location.protocol&&b.attr("src","javascript:false"),g.append(b).append(C),y=b[0],k=C[0],xt.dimensions(m.width||Ct.width(),m.height||Ct.height()),t=K(),t.open(),t.write(l("html",{attrs:f?' class="ie ie"'+f:"",spellcheck:m.spellcheck?"":'spellcheck="false"',charset:m.charset,style:m.style})),t.close(),w=e(t),x=e(t.body),xt.readOnly(!!m.readOnly),(a.ios||f)&&(x.height("100%"),f||x.bind("touchend",xt.focus)),n=Ct.attr("tabindex"),C.attr("tabindex",n),b.attr("tabindex",n),N=new r(y.contentWindow),xt.val(Ct.hide().val())},V=function(){m.autoUpdate&&(x.bind("blur",yt),C.bind("blur",yt)),null===m.rtl&&(m.rtl="rtl"===C.css("direction")),xt.rtl(!!m.rtl),m.autoExpand&&w.bind("keyup",xt.expandToContent),m.resizeEnabled&&U(),g.attr("id",m.id),xt.emoticons(m.emoticonsEnabled)},$=function(){var t=f?"selectionchange":"keyup focus blur contextmenu mouseup touchend click",n="keydown keyup keypress focus blur contextmenu";d.click(it),e(wt.form).bind("reset",tt).submit(xt.updateOriginal),u.bind("resize orientationChanged",ot),x.keypress(et).keydown(J).keydown(Z).keyup(ct).blur(vt).keyup(bt).bind("paste",X).bind(t,ut).bind(n,rt),m.emoticonsCompat&&s.getSelection&&x.keyup(ht),C.blur(vt).keyup(bt).keydown(J).bind(n,rt),w.mousedown(nt).blur(vt).bind(t,ut).bind("beforedeactivate keyup mouseup",W).keyup(ct).focus(function(){S=null}),g.bind("selectionchanged",dt).bind("selectionchanged",lt).bind("selectionchanged valuechanged nodechanged",rt)},j=function(){var t,n=xt.commands,r=(m.toolbarExclude||"").split(","),i=m.toolbar.split("|");v=e('<div class="sceditor-toolbar" unselectable="on" />'),e.each(i,function(i,o){t=e('<div class="sceditor-group" />'),e.each(o.split(","),function(i,o){var a,s,c=n[o];!c||e.inArray(o,r)>-1||(s=c.shortcut,a=l("toolbarButton",{name:o,dispName:xt._(c.tooltip||o)},!0),a.data("sceditor-txtmode",!!c.txtExec).data("sceditor-wysiwygmode",!!c.exec).toggleClass("disabled",!c.exec).mousedown(function(){(!f||9>f)&&(z=!0)}).click(function(){var t=e(this);return t.hasClass("disabled")||P(t,c),lt(),!1}),c.tooltip&&a.attr("title",xt._(c.tooltip)+(s?"("+s+")":"")),s&&xt.addShortcut(s,o),c.state?St.push({name:o,state:c.state}):"string"==typeof c.exec&&St.push({name:o,state:c.exec}),t.append(a),Ot[o]=a)}),t[0].firstChild&&v.append(t)}),e(m.toolbarContainer||g).append(v)},Q=function(){e.each(xt.commands,function(t,n){n.forceNewLineAfter&&e.isArray(n.forceNewLineAfter)&&(Et=e.merge(Et,n.forceNewLineAfter))}),ct()},U=function(){var t,n,r,i,o,a,l=e('<div class="sceditor-grip" />'),c=e('<div class="sceditor-resize-cover" />'),u="touchmove mousemove",p="touchcancel touchend mouseup",h=0,v=0,b=0,y=0,x=0,w=0,C=g.width(),k=g.height(),E=!1,S=xt.rtl();t=m.resizeMinHeight||k/1.5,n=m.resizeMaxHeight||2.5*k,r=m.resizeMinWidth||C/1.25,i=m.resizeMaxWidth||1.25*C,o=function(e){"touchmove"===e.type?(e=s.event,b=e.changedTouches[0].pageX,y=e.changedTouches[0].pageY):(b=e.pageX,y=e.pageY);var o=w+(y-v),a=S?x-(b-h):x+(b-h);i>0&&a>i&&(a=i),r>0&&r>a&&(a=r),m.resizeWidth||(a=!1),n>0&&o>n&&(o=n),t>0&&t>o&&(o=t),m.resizeHeight||(o=!1),(a||o)&&(xt.dimensions(a,o),7>f&&g.height(o)),e.preventDefault()},a=function(e){E&&(E=!1,c.hide(),g.removeClass("resizing").height("auto"),d.unbind(u,o),d.unbind(p,a),e.preventDefault())},g.append(l),g.append(c.hide()),l.bind("touchstart mousedown",function(e){"touchstart"===e.type?(e=s.event,h=e.touches[0].pageX,v=e.touches[0].pageY):(h=e.pageX,v=e.pageY),x=g.width(),w=g.height(),E=!0,g.addClass("resizing"),c.show(),d.bind(u,o),d.bind(p,a),7>f&&g.height(w),e.preventDefault()})},Y=function(){var t,n=m.emoticons,r=m.emoticonsRoot;e.isPlainObject(n)&&m.emoticonsEnabled&&e.each(n,function(i,o){e.each(o,function(e,o){r&&(o={url:r+(o.url||o),tooltip:o.tooltip||e},n[i][e]=o),t=c.createElement("img"),t.src=o.url||o,kt.push(t)})})},ft=function(){var t,n,r=w[0],o=x[0],a=o.firstChild,l=!!m.autofocusEnd;if(g.is(":visible")){if(xt.sourceMode())return n=l?k.value.length:0,void(k.setSelectionRange?k.setSelectionRange(n,n):(t=k.createTextRange(),t.moveEnd("character",n),t.collapse(!1),t.select()));if(i.removeWhiteSpace(o),l)for((a=o.lastChild)||(a=r.createElement("p"),x.append(a));a.lastChild;)a=a.lastChild,!p&&e(a).is("br")&&a.previousSibling&&(a=a.previousSibling);r.createRange?(t=r.createRange(),i.canHaveChildren(a)?t.selectNodeContents(a):(t.setStartBefore(a),l&&t.setStartAfter(a))):(t=o.createTextRange(),t.moveToElementText(3!==a.nodeType?a:a.parentNode)),t.collapse(!l),N.selectRange(t),B=t,l&&(w.scrollTop(o.scrollHeight),x.scrollTop(o.scrollHeight)),xt.focus()}},xt.readOnly=function(e){return"boolean"!=typeof e?"readonly"===C.attr("readonly"):(x[0].contentEditable=!e,e?C.attr("readonly","readonly"):C.removeAttr("readonly"),at(e),xt)},xt.rtl=function(e){var t=e?"rtl":"ltr";return"boolean"!=typeof e?"rtl"===C.attr("dir"):(x.attr("dir",t),C.attr("dir",t),g.removeClass("rtl").removeClass("ltr").addClass(t),xt)},at=function(t){var n=xt.inSourceMode()?"txtmode":"wysiwygmode";e.each(Ot,function(e,r){t!==!0&&r.data("sceditor-"+n)?r.removeClass("disabled"):r.addClass("disabled")})},xt.width=function(e,t){return e||0===e?(xt.dimensions(e,null,t),xt):g.width()},xt.dimensions=function(e,t,n){var r,i=8>f||c.documentMode<8?2:0;return e=e||0===e?e:!1,t=t||0===t?t:!1,e===!1&&t===!1?{width:xt.width(),height:xt.height()}:(b.data("outerWidthOffset")===r&&xt.updateStyleCache(),e!==!1&&(n!==!1&&(m.width=e),t===!1&&(t=g.height(),n=!1),g.width(e),e&&e.toString().indexOf("%")>-1&&(e=g.width()),b.width(e-b.data("outerWidthOffset")),C.width(e-C.data("outerWidthOffset")),a.ios&&x&&x.width(e-b.data("outerWidthOffset")-(x.outerWidth(!0)-x.width()))),t!==!1&&(n!==!1&&(m.height=t),t&&t.toString().indexOf("%")>-1&&(t=g.height(t).height(),g.height("auto")),t-=m.toolbarContainer?0:v.outerHeight(!0),b.height(t-b.data("outerHeightOffset")),C.height(t-i-C.data("outerHeightOffset"))),xt)},xt.updateStyleCache=function(){b.data("outerWidthOffset",b.outerWidth(!0)-b.width()),C.data("outerWidthOffset",C.outerWidth(!0)-C.width()),b.data("outerHeightOffset",b.outerHeight(!0)-b.height()),C.data("outerHeightOffset",C.outerHeight(!0)-C.height())},xt.height=function(e,t){return e||0===e?(xt.dimensions(null,e,t),xt):g.height()},xt.maximize=function(t){return"undefined"==typeof t?g.is(".sceditor-maximize"):(t=!!t,7>f&&e("html, body").toggleClass("sceditor-maximize",t),g.toggleClass("sceditor-maximize",t),xt.width(t?"100%":m.width,!1),xt.height(t?"100%":m.height,!1),xt)},xt.expandToContent=function(e){var t=g.height(),n=t-b.height(),r=x[0].scrollHeight||w[0].documentElement.scrollHeight,i=m.resizeMaxHeight||2*(m.height||Ct.height());r+=n,(e===!0||i>=r)&&r>t&&xt.height(r)},xt.destroy=function(){O&&(O.destroy(),N=null,S=null,O=null,d.unbind("click",it),u.unbind("resize orientationChanged",ot),e(wt.form).unbind("reset",tt).unbind("submit",xt.updateOriginal),x.unbind(),w.unbind().find("*").remove(),C.unbind().remove(),v.remove(),g.unbind().find("*").unbind().remove(),g.remove(),Ct.removeData("sceditor").removeData("sceditorbbcode").show(),I&&Ct.attr("required","required"))},xt.createDropDown=function(t,n,r,i){var o,a="sceditor-"+n,l=E&&E.is("."+a);xt.closeDropDown(),l||(i!==!1&&e(r).find(":not(input,textarea)").filter(function(){return 1===this.nodeType}).attr("unselectable","on"),o={top:t.offset().top,left:t.offset().left,marginTop:t.outerHeight()},e.extend(o,m.dropDownCss),E=e('<div class="sceditor-dropdown '+a+'" />').css(o).append(r).appendTo(e("body")).on("click focusin",function(e){e.stopPropagation()}),setTimeout(function(){E.find("input,textarea").first().focus()}))},it=function(e){3!==e.which&&E&&(yt(),xt.closeDropDown())},X=function(e){var t,n,r,i=x[0],o=w[0],a=0,l=c.createElement("div"),s=o.createDocumentFragment(),u=e?e.clipboardData:!1;if(m.disablePasting)return!1;if(m.enablePasteFiltering){if(N.saveRange(),c.body.appendChild(l),u&&u.getData&&((t=u.getData("text/html"))||(t=u.getData("text/plain"))))return l.innerHTML=t,G(i,l),!1;for(r=x.scrollTop()||w.scrollTop();i.firstChild;)s.appendChild(i.firstChild);return n=function(e,t){if(e.childNodes.length>0||a>25){for(;e.firstChild;)t.appendChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild);x.scrollTop(r),w.scrollTop(r),t.childNodes.length>0?G(e,t):N.restoreRange()}else a++,setTimeout(function(){n(e,t)},20)},n(i,l),xt.focus(),!0}},G=function(t,n){i.fixNesting(n);var r=n.innerHTML;O.hasHandler("toSource")&&(r=O.callOnlyFirst("toSource",r,e(n))),n.parentNode.removeChild(n),O.hasHandler("toWysiwyg")&&(r=O.callOnlyFirst("toWysiwyg",r,!0)),N.restoreRange(),xt.wysiwygEditorInsertHtml(r,null,!0)},xt.closeDropDown=function(e){E&&(E.unbind().remove(),E=null),e===!0&&xt.focus()},K=function(){return y.contentDocument?y.contentDocument:y.contentWindow&&y.contentWindow.document?y.contentWindow.document:y.document},xt.wysiwygEditorInsertHtml=function(t,n,r){var o,a,l,s=b.height();xt.focus(),(r||!e(R).is("code")&&0===e(R).parents("code").length)&&(N.insertHTML(t,n),N.saveRange(),A(x[0]),o=x.find("#sceditor-end-marker").show(),a=x.scrollTop()||w.scrollTop(),l=i.getOffset(o[0]).top+1.5*o.outerHeight(!0)-s,o.hide(),(l>a||a>l+s)&&(x.scrollTop(l),w.scrollTop(l)),gt(!1),N.restoreRange(),ct())},xt.wysiwygEditorInsertText=function(e,t){xt.wysiwygEditorInsertHtml(o.entities(e),o.entities(t))},xt.insertText=function(e,t){return xt.inSourceMode()?xt.sourceEditorInsertText(e,t):xt.wysiwygEditorInsertText(e,t),xt},xt.sourceEditorInsertText=function(e,t){var n,r,i,o=k.selectionStart,a=k.selectionEnd;r=k.scrollTop,k.focus(),"undefined"!=typeof o?(i=k.value,t&&(e+=i.substring(o,a)+t),k.value=i.substring(0,o)+e+i.substring(a,i.length),k.selectionStart=o+e.length-(t?t.length:0),k.selectionEnd=k.selectionStart):(n=c.selection.createRange(),t&&(e+=n.text+t),n.text=e,t&&n.moveEnd("character",0-t.length),n.moveStart("character",n.End-n.Start),n.select()),k.scrollTop=r,k.focus(),gt()},xt.getRangeHelper=function(){return N},xt.sourceEditorCaret=function(e){var t,n={};return k.focus(),"undefined"!=typeof k.selectionStart?e?(k.selectionStart=e.start,k.selectionEnd=e.end):(n.start=k.selectionStart,n.end=k.selectionEnd):(t=c.selection.createRange(),e?(t.moveEnd("character",e.end),t.moveStart("character",e.start),t.select()):(n.start=t.Start,n.end=t.End)),e?this:n},xt.val=function(e,t){return"string"!=typeof e?xt.inSourceMode()?xt.getSourceEditorValue(!1):xt.getWysiwygEditorValue(t):(xt.inSourceMode()?xt.setSourceEditorValue(e):(t!==!1&&O.hasHandler("toWysiwyg")&&(e=O.callOnlyFirst("toWysiwyg",e)),xt.setWysiwygEditorValue(e)),xt)},xt.insert=function(t,n,r,i,o){if(xt.inSourceMode())return xt.sourceEditorInsertText(t,n),xt;if(n){var a=N.selectedHtml(),l=e("<div>").appendTo(e("body")).hide().html(a);r!==!1&&O.hasHandler("toSource")&&(a=O.callOnlyFirst("toSource",a,l)),l.remove(),t+=a+n}return r!==!1&&O.hasHandler("toWysiwyg")&&(t=O.callOnlyFirst("toWysiwyg",t,!0)),r!==!1&&o===!0&&(t=t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),xt.wysiwygEditorInsertHtml(t),xt},xt.getWysiwygEditorValue=function(e){var t,n,r=N.hasSelection();return r?N.saveRange():S&&S.getBookmark&&(n=S.getBookmark()),i.fixNesting(x[0]),t=x.html(),e!==!1&&O.hasHandler("toSource")&&(t=O.callOnlyFirst("toSource",t,x)),r?(N.restoreRange(),S=null):n&&(S.moveToBookmark(n),S=null),t},xt.getBody=function(){return x},xt.getContentAreaContainer=function(){return b},xt.getSourceEditorValue=function(e){var t=C.val();return e!==!1&&O.hasHandler("toWysiwyg")&&(t=O.callOnlyFirst("toWysiwyg",t)),t},xt.setWysiwygEditorValue=function(e){e||(e="<p>"+(f?"":"<br />")+"</p>"),x[0].innerHTML=e,A(x[0]),ct(),gt()},xt.setSourceEditorValue=function(e){C.val(e),gt()},xt.updateOriginal=function(){Ct.val(xt.val())},A=function(t){if(m.emoticonsEnabled&&!e(t).parents("code").length){var n=t.ownerDocument,r="\\s| | | | |&nbsp;",a=[],s=[],c=e.extend({},m.emoticons.more,m.emoticons.dropdown,m.emoticons.hidden);e.each(c,function(e){m.emoticonsCompat&&(s[e]=new RegExp("(>|^|"+r+")"+o.regex(e)+"($|<|"+r+")")),a.push(e)});var u=function(t){for(t=t.firstChild;t;){var r,o,d,f,p,h,g,v=t.parentNode,b=t.nodeValue;if(3!==t.nodeType)e(t).is("code")||u(t);else if(b)for(p=a.length;p--;)o=a[p],g=m.emoticonsCompat?b.search(s[o]):b.indexOf(o),g>-1&&(h=t.nextSibling,d=c[o],r=b.substr(g).split(o),b=b.substr(0,g)+r.shift(),t.nodeValue=b,f=i.parseHTML(l("emoticon",{key:o,url:d.url||d,tooltip:d.tooltip||o}),n),v.insertBefore(f[0],h),v.insertBefore(n.createTextNode(r.join(o)),h));t=t.nextSibling}};u(t),m.emoticonsCompat&&(Nt=x.find("img[data-sceditor-emoticon]"))}},xt.inSourceMode=function(){return g.hasClass("sourceMode")},xt.sourceMode=function(e){var t=xt.inSourceMode();return"boolean"!=typeof e?t:((t&&!e||!t&&e)&&xt.toggleSourceMode(),xt)},xt.toggleSourceMode=function(){var e=xt.inSourceMode();(a.isWysiwygSupported||!e)&&(e||(N.saveRange(),N.clear()),xt.blur(),e?xt.setWysiwygEditorValue(xt.getSourceEditorValue()):xt.setSourceEditorValue(xt.getWysiwygEditorValue()),S=null,C.toggle(),b.toggle(),g.toggleClass("wysiwygMode",e).toggleClass("sourceMode",!e),at(),lt())},st=function(){return k.focus(),"undefined"!=typeof k.selectionStart?k.value.substring(k.selectionStart,k.selectionEnd):c.selection.createRange().text},P=function(t,n){xt.inSourceMode()?n.txtExec&&(e.isArray(n.txtExec)?xt.sourceEditorInsertText.apply(xt,n.txtExec):n.txtExec.call(xt,t,st())):n.exec&&(e.isFunction(n.exec)?n.exec.call(xt,t):xt.execCommand(n.exec,n.hasOwnProperty("execParam")?n.execParam:null))},W=function(){f&&(S=N.selectedRange())},xt.execCommand=function(t,n){var r=!1,i=xt.commands[t],o=e(N.parentNode());if(xt.focus(),!o.is("code")&&0===o.parents("code").length){try{r=w[0].execCommand(t,!1,n)}catch(a){}!r&&i&&i.errorMessage&&alert(xt._(i.errorMessage)),lt()}},ut=function(){function t(){N&&!N.compare(B)&&(B=N.cloneSelected(),g.trigger(e.Event("selectionchanged"))),H=!1}H||(H=!0,f?t():setTimeout(t,100))},dt=function(){var t,n=N.parentNode();D!==n&&(t=D,D=n,R=N.getFirstBlockParent(n),g.trigger(e.Event("nodechanged",{oldNode:t,newNode:D})))},xt.currentNode=function(){return D},xt.currentBlockNode=function(){return R},lt=function(e){var t,n,r="active",i=w[0],o=xt.sourceMode();if(xt.readOnly())return void v.find(r).removeClass(r);o||(n=e?e.newNode:N.parentNode(),t=N.getFirstBlockParent(n));for(var a=0;a<St.length;a++){var l=0,s=Ot[St[a].name],c=St[a].state,u=o&&!s.data("sceditor-txtmode")||!o&&!s.data("sceditor-wysiwygmode");if("string"==typeof c){if(!o)try{l=i.queryCommandEnabled(c)?0:-1,l>-1&&(l=i.queryCommandState(c)?1:0)}catch(d){}}else u||(l=c.call(xt,n,t));s.toggleClass("disabled",u||0>l).toggleClass(r,l>0)}},et=function(t){var n,r,o,a,l="code,blockquote,pre",s="li,ul,ol";return t.originalEvent.defaultPrevented?void 0:(xt.closeDropDown(),n=e(R).closest(l+","+s).first(),13===t.which&&n.length&&!n.is(s)?(S=null,r=w[0].createElement("br"),N.insertNode(r),p||(o=r.parentNode,a=o.lastChild,a&&3===a.nodeType&&""===a.nodeValue&&(o.removeChild(a),a=o.lastChild),!i.isInline(o,!0)&&a===r&&i.isInline(r.previousSibling)&&N.insertHTML("<br>")),!1):void 0)},ct=function(){var t,n,r,o=x[0];i.rTraverse(o,function(a){return t=a.nodeName.toLowerCase(),e.inArray(t,Et)>-1&&(n=!0),3===a.nodeType&&!/^\s*$/.test(a.nodeValue)||"br"===t||p&&!a.firstChild&&!i.isInline(a,!1)?(n&&(r=w[0].createElement("p"),r.className="sceditor-nlf",r.innerHTML=p?"":"<br />",o.appendChild(r)),!1):void 0})},tt=function(){xt.val(Ct.val())},nt=function(){xt.closeDropDown(),S=null},ot=function(){var e=m.height,t=m.width;xt.maximize()?xt.dimensions("100%","100%",!1):(e&&e.toString().indexOf("%")>-1||t&&t.toString().indexOf("%")>-1)&&xt.dimensions(t,e)},xt._=function(){var e,t=arguments;return T&&T[t[0]]&&(t[0]=T[t[0]]),t[0].replace(/\{(\d+)\}/g,function(n,r){return t[r-0+1]!==e?t[r-0+1]:"{"+r+"}"})},rt=function(t){O.call(t.type+"Event",t,xt);var n=t.target===k?"scesrc":"scewys",r=e.Event(t);r.type=n+t.type,g.trigger(r,xt)},xt.bind=function(t,n,r,i){t=t.split(" ");for(var o=t.length;o--;)e.isFunction(n)&&(r||g.bind("scewys"+t[o],n),i||g.bind("scesrc"+t[o],n),"valuechanged"===t[o]&&(gt.hasHandler=!0));return xt},xt.unbind=function(t,n,r,i){t=t.split(" ");for(var o=t.length;o--;)e.isFunction(n)&&(r||g.unbind("scewys"+t[o],n),i||g.unbind("scesrc"+t[o],n));return xt},xt.blur=function(t,n,r){return e.isFunction(t)?xt.bind("blur",t,n,r):xt.sourceMode()?C.blur():x.blur(),xt},xt.focus=function(t,n,r){if(e.isFunction(t))xt.bind("focus",t,n,r);else if(xt.inSourceMode())k.focus();else{var i,o=N.selectedRange();B||N.hasSelection()||ft(),!p&&o&&1===o.endOffset&&o.collapsed&&(i=o.endContainer,i&&1===i.childNodes.length&&e(i.firstChild).is("br")&&(o.setStartBefore(i.firstChild),o.collapse(!0),N.selectRange(o))),y.contentWindow.focus(),x[0].focus(),S&&(N.selectRange(S),S=null)}return xt},xt.keyDown=function(e,t,n){return xt.bind("keydown",e,t,n)},xt.keyPress=function(e,t,n){return xt.bind("keypress",e,t,n)},xt.keyUp=function(e,t,n){return xt.bind("keyup",e,t,n)},xt.nodeChanged=function(e){return xt.bind("nodechanged",e,!1,!0)},xt.selectionChanged=function(e){return xt.bind("selectionchanged",e,!1,!0)},xt.valueChanged=function(e,t,n){return xt.bind("valuechanged",e,t,n)},pt=function(t){var n,r=0,i=xt.emoticonsCache,o=String.fromCharCode(t.which);return e(R).is("code")||e(R).parents("code").length?void 0:(i||(i=[],e.each(e.extend({},m.emoticons.more,m.emoticons.dropdown,m.emoticons.hidden),function(e,t){i[r++]=[e,l("emoticon",{key:e,url:t.url||t,tooltip:t.tooltip||e})]}),i.sort(function(e,t){return e[0].length-t[0].length}),xt.emoticonsCache=i,xt.longestEmoticonCode=i[i.length-1][0].length),n=N.raplaceKeyword(xt.emoticonsCache,!0,!0,xt.longestEmoticonCode,m.emoticonsCompat,o),n&&m.emoticonsCompat?(Nt=x.find("img[data-sceditor-emoticon]"),/^\s$/.test(o)):!n)},ht=function(){if(Nt.length){var t,n,r,i,o,a,l=xt.currentBlockNode(),s=!1,c=/[^\s\xA0\u2002\u2003\u2009\u00a0]+/;Nt=e.map(Nt,function(u){return u&&u.parentNode?e.contains(l,u)?(t=u.previousSibling,n=u.nextSibling,o=t.nodeValue,null===o&&(o=t.innerText||""),t&&c.test(t.nodeValue.slice(-1))||n&&c.test((n.nodeValue||"")[0])?(r=u.parentNode,i=N.cloneSelected(),a=i.startContainer,o+=e(u).data("sceditor-emoticon"),a===n?s=o.length+i.startOffset:a===l&&l.childNodes[i.startOffset]===n?s=o.length:a===t&&(s=i.startOffset),n&&3===n.nodeType||(n=r.insertBefore(r.ownerDocument.createTextNode(""),n)),n.insertData(0,o),r.removeChild(t),r.removeChild(u),s!==!1&&(i.setStart(n,s),i.collapse(!0),N.selectRange(i)),null):u):u:null})}},xt.emoticons=function(t){return t||t===!1?(m.emoticonsEnabled=t,t?(x.keypress(pt),xt.sourceMode()||(N.saveRange(),A(x[0]),Nt=x.find("img[data-sceditor-emoticon]"),gt(!1),N.restoreRange())):(x.find("img[data-sceditor-emoticon]").replaceWith(function(){return e(this).data("sceditor-emoticon")}),Nt=[],x.unbind("keypress",pt),gt()),xt):m.emoticonsEnabled},xt.css=function(t){return M||(M=e('<style id="#inline" />',w[0]).appendTo(w.find("head"))[0]),"string"!=typeof t?M.styleSheet?M.styleSheet.cssText:M.innerHTML:(M.styleSheet?M.styleSheet.cssText=t:M.innerHTML=t,xt)},J=function(e){var t=[],n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|","[":"{","]":"}"},r={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"win",92:"win",93:"select",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},i={109:"-",110:"del",111:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},o=e.which,a=r[o]||String.fromCharCode(o).toLowerCase();return e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&(t.push("shift"),i[o]?a=i[o]:n[a]&&(a=n[a])),a&&(16>o||o>18)&&t.push(a),t=t.join("+"),Tt[t]?Tt[t].call(xt):void 0},xt.addShortcut=function(e,t){return e=e.toLowerCase(),Tt[e]="string"==typeof t?function(){return P(Ot[t],xt.commands[t]),!1}:t,xt},xt.removeShortcut=function(e){return delete Tt[e.toLowerCase()],xt},Z=function(t){var n,r,i,o,a;if(!m.disableBlockRemove&&8===t.which&&(o=N.selectedRange())&&(s.getSelection?(n=o.startContainer,r=o.startOffset):(n=o.parentElement(),i=w[0].selection.createRange(),i.moveToElementText(n),i.setEndPoint("EndToStart",o),r=i.text.length),0===r&&(a=mt()))){for(;n!==a;){for(;n.previousSibling;)if(n=n.previousSibling,3!==n.nodeType||n.nodeValue)return;if(!(n=n.parentNode))return}if(a&&!e(a).is("body"))return xt.clearBlockFormatting(a),!1}},mt=function(){for(var t=R;!i.hasStyling(t)||i.isInline(t,!0);)if(!(t=t.parentNode)||e(t).is("body"))return;return t},xt.clearBlockFormatting=function(t){return t=t||mt(),!t||e(t).is("body")?xt:(N.saveRange(),t.className="",S=null,e(t).attr("style",""),e(t).is("p,div,td")||i.convertElement(t,"p"),N.restoreRange(),xt)},gt=function(t){if(O&&(O.hasHandler("valuechangedEvent")||gt.hasHandler)){var n,r=xt.sourceMode(),i=!r&&N.hasSelection();t=t!==!1&&!w[0].getElementById("sceditor-start-marker"),bt.timer&&(clearTimeout(bt.timer),bt.timer=!1),i&&t&&N.saveRange(),n=r?C.val():x.html(),n!==gt.lastHtmlValue&&(gt.lastHtmlValue=n,g.trigger(e.Event("valuechanged",{rawValue:r?xt.val():n}))),i&&t&&N.removeMarkers()}},vt=function(){bt.timer&&gt()},bt=function(e){var t=e.which,n=bt.lastChar,r=13===n||32===n,i=8===n||46===n;bt.lastChar=t,13===t||32===t?r?bt.triggerNextChar=!0:gt():8===t||46===t?i?bt.triggerNextChar=!0:gt():bt.triggerNextChar&&(gt(),bt.triggerNextChar=!1),bt.timer&&clearTimeout(bt.timer),bt.timer=setTimeout(function(){gt()},1500)},yt=function(){z||xt.updateOriginal(),z=!1},L()};return h.locale={},h.command={get:function(e){return h.commands[e]||null},set:function(t,n){return t&&n?(n=e.extend(h.commands[t]||{},n),n.remove=function(){h.command.remove(t)},h.commands[t]=n,this):!1},remove:function(e){return h.commands[e]&&delete h.commands[e],this}},h}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(){"use strict";var e={},t=function(t){var n=this,r=[],i=function(e){return"signal"+e.charAt(0).toUpperCase()+e.slice(1)},o=function(e,n){e=[].slice.call(e);var o,a,l=i(e.shift());for(o=0;o<r.length;o++)if(l in r[o]&&(a=r[o][l].apply(t,e),n))return a};n.call=function(){o(arguments,!1)},n.callOnlyFirst=function(){return o(arguments,!0)},n.hasHandler=function(e){var t=r.length;for(e=i(e);t--;)if(e in r[t])return!0;return!1},n.exists=function(t){return t in e?(t=e[t],"function"==typeof t&&"object"==typeof t.prototype):!1},n.isRegistered=function(t){if(n.exists(t))for(var i=r.length;i--;)if(r[i]instanceof e[t])return!0;return!1},n.register=function(i){return!n.exists(i)||n.isRegistered(i)?!1:(i=new e[i],r.push(i),"init"in i&&i.init.call(t),!0)},n.deregister=function(i){var o,a=r.length,l=!1;if(!n.isRegistered(i))return l;for(;a--;)r[a]instanceof e[i]&&(o=r.splice(a,1)[0],l=!0,"destroy"in o&&o.destroy.call(t));return l},n.destroy=function(){for(var e=r.length;e--;)"destroy"in r[e]&&r[e].destroy.call(t);r=[],t=null}};return t.plugins=e,t}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(e,t){"use strict";var r=n(1),i=navigator.userAgent;t.ie=function(){var e,t=3,n=document,r=n.createElement("div"),i=r.getElementsByTagName("i");do r.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->";while(i[0]);return n.documentMode&&n.all&&window.atob&&(t=10),4===t&&n.documentMode&&(t=11),t>4?t:e}(),t.ios=/iPhone|iPod|iPad| wosbrowser\//i.test(i),t.isWysiwygSupported=function(){var e,n,o,a=r('<p contenteditable="true">')[0].contentEditable;return a===o&&"inherit"===a?!1:(n=/Opera Mobi|Opera Mini/i.test(i),/Android/i.test(i)&&(n=!0,/Safari/.test(i)&&(e=/Safari\/(\d+)/.exec(i),n=e&&e[1]?e[1]<534:!0)),/ Silk\//i.test(i)&&(e=/AppleWebKit\/(\d+)/.exec(i),n=e&&e[1]?e[1]<534:!0),t.ios&&(n=/OS [0-4](_\d)+ like Mac/i.test(i)),/Firefox/i.test(i)&&(n=!1),/OneBrowser/i.test(i)&&(n=!1),"UCWEB"===navigator.vendor&&(n=!1),!n)}()}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(e,t){"use strict";var n=/^(?:https?|s?ftp|mailto|spotify|skype|ssh|teamspeak|tel):|(?:\/\/)/i;t.regex=function(e){return e.replace(/([\-.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},t.entities=function(e,t){if(!e)return e;var n={"&":"&amp;","<":"&lt;",">":"&gt;","  ":" &nbsp;","\r\n":"\n","\r":"\n","\n":"<br />"};return t!==!1&&(n['"']="&#34;",n["'"]="&#39;",n["`"]="&#96;"),e=e.replace(/ {2}|\r\n|[&<>\r\n'"`]/g,function(e){return n[e]||e})},t.uriScheme=function(e){var t,r=/^[^\/]*:/i,i=window.location;return e&&r.test(e)&&!n.test(e)?(t=i.pathname.split("/"),t.pop(),i.protocol+"//"+i.host+t.join("/")+"/"+e):e}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(){"use strict";var e=n(1),t=n(4).ie,r=n(10),i=t&&11>t,o={bold:{exec:"bold",tooltip:"Bold",shortcut:"ctrl+b"},italic:{exec:"italic",tooltip:"Italic",shortcut:"ctrl+i"},underline:{exec:"underline",tooltip:"Underline",shortcut:"ctrl+u"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{_dropDown:function(t,n,i){for(var o=0,a=t.opts.fonts.split(","),l=e("<div />"),s=function(){return i(e(this).data("font")),t.closeDropDown(!0),!1};o<a.length;o++)l.append(r("fontOpt",{font:a[o]},!0).click(s));t.createDropDown(n,"font-picker",l)},exec:function(e){var t=this;o.font._dropDown(t,e,function(e){t.execCommand("fontname",e)})},tooltip:"Font Name"},size:{_dropDown:function(t,n,i){for(var o=e("<div />"),a=function(n){i(e(this).data("size")),t.closeDropDown(!0),n.preventDefault()},l=1;7>=l;l++)o.append(r("sizeOpt",{size:l},!0).click(a));t.createDropDown(n,"fontsize-picker",o)},exec:function(e){var t=this;o.size._dropDown(t,e,function(e){t.execCommand("fontsize",e)})},tooltip:"Font Size"},color:{_dropDown:function(t,n,r){var i,a,l,s,c={r:255,g:255,b:255},u=e("<div />"),d=t.opts.colors?t.opts.colors.split("|"):new Array(21),f=[],p=o.color;if(!p._htmlCache){for(i=0;i<d.length;++i){for(s=d[i]?d[i].split(","):new Array(21),f.push('<div class="sceditor-color-column">'),a=0;a<s.length;++a)l=s[a]||"#"+c.r.toString(16)+c.g.toString(16)+c.b.toString(16),f.push('<a href="#" class="sceditor-color-option" style="background-color: '+l+'" data-color="'+l+'"></a>'),a%5===0?(c.g-=51,c.b=255):c.b-=51;f.push("</div>"),i%5===0?(c.r-=51,c.g=255,c.b=255):(c.g=255,c.b=255)}p._htmlCache=f.join("")}u.append(p._htmlCache).find("a").click(function(n){r(e(this).attr("data-color")),t.closeDropDown(!0),n.preventDefault()}),t.createDropDown(n,"color-picker",u)},exec:function(e){var t=this;o.color._dropDown(t,e,function(e){t.execCommand("forecolor",e)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(e){var t,n,i=this;n=r("pastetext",{label:i._("Paste your text inside the following box:"),insert:i._("Insert")},!0),n.find(".button").click(function(e){t=n.find("#txt").val(),t&&i.wysiwygEditorInsertText(t),i.closeDropDown(!0),e.preventDefault()}),i.createDropDown(e,"pastetext",n)},tooltip:"Paste Text"},bulletlist:{exec:"insertunorderedlist",tooltip:"Bullet list"},orderedlist:{exec:"insertorderedlist",tooltip:"Numbered list"},indent:{state:function(t,n){var r,i,o,a=e(n),l=a.parents("ul,ol,menu"),s=l.first();if(l.length>1||s.children().length>1)return 0;if(a.is("ul,ol,menu")){if(r=this.getRangeHelper().selectedRange(),!(window.Range&&r instanceof Range))return a.is("li,ul,ol,menu")?0:-1;if(i=r.startContainer.parentNode,o=r.endContainer.parentNode,i!==i.parentNode.firstElementChild||e(o).is("li")&&o!==o.parentNode.lastElementChild)return 0}return-1},exec:function(){var t=this,n=e(t.getRangeHelper().getFirstBlockParent());t.focus(),n.parents("ul,ol,menu")&&t.execCommand("indent")},tooltip:"Add indent"},outdent:{state:function(t,n){return e(n).is("ul,ol,menu")||e(n).parents("ul,ol,menu").length>0?0:-1},exec:function(){var t=this,n=e(t.getRangeHelper().getFirstBlockParent());n.parents("ul,ol,menu")&&t.execCommand("outdent")},tooltip:"Remove one indent"},table:{forceNewLineAfter:["table"],exec:function(e){var t=this,n=r("table",{rows:t._("Rows:"),cols:t._("Cols:"),insert:t._("Insert")},!0);n.find(".button").click(function(e){var r,o,a=n.find("#rows").val()-0,l=n.find("#cols").val()-0,s="<table>";if(!(1>a||1>l)){for(r=0;a>r;r++){for(s+="<tr>",o=0;l>o;o++)s+="<td>"+(i?"":"<br />")+"</td>";s+="</tr>"}s+="</table>",t.wysiwygEditorInsertHtml(s),t.closeDropDown(!0),e.preventDefault()}}),t.createDropDown(e,"inserttable",n)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{forceNewLineAfter:["code"],exec:function(){this.wysiwygEditorInsertHtml("<code>",(i?"":"<br />")+"</code>")},tooltip:"Code"},image:{exec:function(e){var t=this,n=r("image",{url:t._("URL:"),width:t._("Width (optional):"),height:t._("Height (optional):"),insert:t._("Insert")},!0);
n.find(".button").click(function(e){var r=n.find("#image").val(),i=n.find("#width").val(),o=n.find("#height").val(),a="";i&&(a+=' width="'+i+'"'),o&&(a+=' height="'+o+'"'),r&&t.wysiwygEditorInsertHtml("<img"+a+' src="'+r+'" />'),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertimage",n)},tooltip:"Insert an image"},email:{exec:function(e){var t=this,n=r("email",{label:t._("E-mail:"),desc:t._("Description (optional):"),insert:t._("Insert")},!0);n.find(".button").click(function(e){var r=n.find("#email").val(),i=n.find("#des").val();r&&(t.focus(),!t.getRangeHelper().selectedHtml()||i?(i=i||r,t.wysiwygEditorInsertHtml('<a href="mailto:'+r+'">'+i+"</a>")):t.execCommand("createlink","mailto:"+r)),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertemail",n)},tooltip:"Insert an email"},link:{exec:function(e){var t=this,n=r("link",{url:t._("URL:"),desc:t._("Description (optional):"),ins:t._("Insert")},!0);n.find(".button").click(function(e){var r=n.find("#link").val(),i=n.find("#des").val();r&&(t.focus(),!t.getRangeHelper().selectedHtml()||i?(i=i||r,t.wysiwygEditorInsertHtml('<a href="'+r+'">'+i+"</a>")):t.execCommand("createlink",r)),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertlink",n)},tooltip:"Insert a link"},unlink:{state:function(){var t=e(this.currentNode());return t.is("a")||t.parents("a").length>0?0:-1},exec:function(){var t=e(this.currentNode()),n=t.is("a")?t:t.parents("a").first();n.length&&n.replaceWith(n.contents())},tooltip:"Unlink"},quote:{forceNewLineAfter:["blockquote"],exec:function(e,t,n){var r="<blockquote>",o="</blockquote>";t?(n=n?"<cite>"+n+"</cite>":"",r=r+n+t+o,o=null):""===this.getRangeHelper().selectedHtml()&&(o=(i?"":"<br />")+o),this.wysiwygEditorInsertHtml(r,o)},tooltip:"Insert a Quote"},emoticon:{exec:function(t){var n=this,r=function(i){var o,a=n.opts.emoticonsCompat,l=n.getRangeHelper(),s=a&&" "!==l.getOuterText(!0,1)?" ":"",c=a&&" "!==l.getOuterText(!1,1)?" ":"",u=e("<div />"),d=e("<div />").appendTo(u),f=0,p=e.extend({},n.opts.emoticons.dropdown,i?n.opts.emoticons.more:{});return e.each(p,function(){f++}),f=Math.sqrt(f),e.each(p,function(t,r){d.append(e("<img />").attr({src:r.url||r,alt:t,title:r.tooltip||t}).click(function(){return n.insert(s+e(this).attr("alt")+c,null,!1).closeDropDown(!0),!1})),d.children().length>=f&&(d=e("<div />").appendTo(u))}),i||(o=e('<a class="sceditor-more">'+n._("More")+"</a>").click(function(){return n.createDropDown(t,"more-emoticons",r(!0)),!1}),u.append(o)),u};n.createDropDown(t,"emoticons",r(!1))},txtExec:function(e){o.emoticon.exec.call(this,e)},tooltip:"Insert an emoticon"},youtube:{_dropDown:function(e,t,n){var i,o=r("youtubeMenu",{label:e._("Video URL:"),insert:e._("Insert")},!0);o.find(".button").click(function(t){var r=o.find("#link").val();r&&(i=r.match(/(?:v=|v\/|embed\/|youtu.be\/)(.{11})/),i&&(r=i[1]),/^[a-zA-Z0-9_\-]{11}$/.test(r)?n(r):alert("Invalid YouTube video")),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertlink",o)},exec:function(e){var t=this;o.youtube._dropDown(t,e,function(e){t.wysiwygEditorInsertHtml(r("youtube",{id:e}))})},tooltip:"Insert a YouTube video"},date:{_date:function(e){var t=new Date,n=t.getYear(),r=t.getMonth()+1,i=t.getDate();return 2e3>n&&(n=1900+n),10>r&&(r="0"+r),10>i&&(i="0"+i),e.opts.dateFormat.replace(/year/i,n).replace(/month/i,r).replace(/day/i,i)},exec:function(){this.insertText(o.date._date(this))},txtExec:function(){this.insertText(o.date._date(this))},tooltip:"Insert current date"},time:{_time:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),r=e.getSeconds();return 10>t&&(t="0"+t),10>n&&(n="0"+n),10>r&&(r="0"+r),t+":"+n+":"+r},exec:function(){this.insertText(o.time._time())},txtExec:function(){this.insertText(o.time._time())},tooltip:"Insert current time"},ltr:{state:function(e,t){return t&&"ltr"===t.style.direction},exec:function(){var t=this,n=t.getRangeHelper().getFirstBlockParent(),r=e(n);t.focus(),(n&&!r.is("body")||(t.execCommand("formatBlock","p"),n=t.getRangeHelper().getFirstBlockParent(),r=e(n),n&&!r.is("body")))&&("ltr"===r.css("direction")?r.css("direction",""):r.css("direction","ltr"))},tooltip:"Left-to-Right"},rtl:{state:function(e,t){return t&&"rtl"===t.style.direction},exec:function(){var t=this,n=t.getRangeHelper().getFirstBlockParent(),r=e(n);t.focus(),(n&&!r.is("body")||(t.execCommand("formatBlock","p"),n=t.getRangeHelper().getFirstBlockParent(),r=e(n),n&&!r.is("body")))&&("rtl"===r.css("direction")?r.css("direction",""):r.css("direction","rtl"))},tooltip:"Right-to-Left"},print:{exec:"print",tooltip:"Print"},maximize:{state:function(){return this.maximize()},exec:function(){this.maximize(!this.maximize())},txtExec:function(){this.maximize(!this.maximize())},tooltip:"Maximize",shortcut:"ctrl+shift+m"},source:{state:function(){return this.sourceMode()},exec:function(){this.toggleSourceMode()},txtExec:function(){this.toggleSourceMode()},tooltip:"View source",shortcut:"ctrl+shift+s"},ignore:{}};return o}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(){"use strict";var e=n(1);return{toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,paste,pastetext|bulletlist,orderedlist,indent,outdent|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|ltr,rtl|print,maximize,source",toolbarExclude:null,style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:null,locale:e("html").attr("lang")||"en",charset:"utf-8",emoticonsCompat:!1,emoticonsEnabled:!0,emoticonsRoot:"",emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:!0,resizeWidth:!0,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:!1,disablePasting:!1,readOnly:!1,rtl:!1,autofocus:!1,autofocusEnd:!0,autoExpand:!1,autoUpdate:!1,spellcheck:!0,runWithoutWysiwygSupport:!1,id:null,plugins:"",zIndex:null,bbcodeTrim:!1,disableBlockRemove:!1,parserOptions:{},dropDownCss:{}}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(){"use strict";var e=n(1),t=n(9),r=n(5),i=n(4),o=i.ie,a=o&&11>o,l=function(t){return e("<p>",t.ownerDocument).append(t).html()},s=function(n,i){var s,c,u,d=i||n.contentDocument||n.document,f=n,p=!!n.getSelection,h="sceditor-start-marker",m="sceditor-end-marker",g="character",v=this;v.insertHTML=function(e,t){var n,r,i=v.selectedRange();if(!i)return!1;if(p){for(t&&(e+=v.selectedHtml()+t),r=d.createElement("p"),n=d.createDocumentFragment(),r.innerHTML=e;r.firstChild;)n.appendChild(r.firstChild);v.insertNode(n)}else i.pasteHTML(u(e,t,!0)),v.restoreRange()},u=function(n,r,i){var a,l,c=d.createElement("div"),u=e(c);if("string"==typeof n?(r&&(n+=v.selectedHtml()+r),u.html(n)):(u.append(n),r&&u.append(v.selectedRange().extractContents()).append(r)),a=c.lastChild){for(;!t.isInline(a.lastChild,!0);)a=a.lastChild;return t.canHaveChildren(a)&&(l=e(a),a.lastChild||l.append("​")),o&&9>o&&e(a).is("img")&&u.append("​"),v.removeMarkers(),(l||u).append(s(h)).append(s(m)),i?u.html():e(d.createDocumentFragment()).append(u.contents())[0]}},v.insertNode=function(e,n){if(p){var r=u(e,n),i=v.selectedRange(),o=i.commonAncestorContainer;if(!r)return!1;i.deleteContents(),o&&3!==o.nodeType&&!t.canHaveChildren(o)?o.parentNode.insertBefore(r,o):i.insertNode(r),v.restoreRange()}else v.insertHTML(l(e),n?l(n):null)},v.cloneSelected=function(){var e=v.selectedRange();return e?p?e.cloneRange():e.duplicate():void 0},v.selectedRange=function(){var e,t,n=p?f.getSelection():d.selection;if(n){if(n.getRangeAt&&n.rangeCount<=0){for(t=d.body;t.firstChild;)t=t.firstChild;e=d.createRange(),e.setStart(t,0),n.addRange(e)}return p&&(e=n.getRangeAt(0)),p||"Control"===n.type||(e=n.createRange()),c(e)?e:null}},c=function(e){var t;return e&&!p&&(t=e.parentElement()),t?t.ownerDocument===d:!0},v.hasSelection=function(){var e=p?f.getSelection():d.selection;return p||!e?e&&e.rangeCount>0:"None"!==e.type&&c(e.createRange())},v.selectedHtml=function(){var e,t=v.selectedRange();if(t){if(p)return e=d.createElement("p"),e.appendChild(t.cloneContents()),e.innerHTML;if(""!==t.text&&t.htmlText)return t.htmlText}return""},v.parentNode=function(){var e=v.selectedRange();return e?e.parentElement?e.parentElement():e.commonAncestorContainer:void 0},v.getFirstBlockParent=function(e){var n=function(e){return t.isInline(e,!0)?(e=e?e.parentNode:null,e?n(e):e):e};return n(e||v.parentNode())},v.insertNodeAt=function(e,t){var n=v.selectedRange(),r=v.cloneSelected();return r?(r.collapse(e),p?r.insertNode(t):r.pasteHTML(l(t)),void v.selectRange(n)):!1},s=function(e){v.removeMarker(e);var t=d.createElement("span");return t.id=e,t.style.lineHeight="0",t.style.display="none",t.className="sceditor-selection sceditor-ignore",t.innerHTML=" ",t},v.insertMarkers=function(){v.insertNodeAt(!0,s(h)),v.insertNodeAt(!1,s(m))},v.getMarker=function(e){return d.getElementById(e)},v.removeMarker=function(e){var t=v.getMarker(e);t&&t.parentNode.removeChild(t)},v.removeMarkers=function(){v.removeMarker(h),v.removeMarker(m)},v.saveRange=function(){v.insertMarkers()},v.selectRange=function(n){if(p){var r,i=f.getSelection(),o=n.endContainer;if(!a&&n.collapsed&&o&&!t.isInline(o,!0)){for(r=o.lastChild;r&&e(r).is(".sceditor-ignore");)r=r.previousSibling;if(e(r).is("br")){var l=d.createRange();l.setEndAfter(r),l.collapse(!1),v.compare(n,l)&&(n.setStartBefore(r),n.collapse(!0))}}i&&(v.clear(),i.addRange(n))}else n.select()},v.restoreRange=function(){var n,r,i,o=v.selectedRange(),a=v.getMarker(h),l=v.getMarker(m);return a&&l&&o?(r=a.nextSibling===l,p?(o=d.createRange(),o.setStartBefore(a),o.setEndAfter(l)):(o=d.body.createTextRange(),n=d.body.createTextRange(),i=a.previousSibling,a.nextSibling!==l||i&&t.isInline(i,!0)&&!e(i).is("br")||e(a).before("​"),n.moveToElementText(a),o.setEndPoint("StartToStart",n),o.moveStart(g,0),n.moveToElementText(l),o.setEndPoint("EndToStart",n),o.moveEnd(g,0)),r&&o.collapse(!0),v.selectRange(o),void v.removeMarkers()):!1},v.selectOuterText=function(e,t){var n=v.cloneSelected();return n?(n.collapse(!1),p?(n.setStart(n.startContainer,n.startOffset-e),n.setEnd(n.endContainer,n.endOffset+t)):(n.moveStart(g,0-e),n.moveEnd(g,t)),void v.selectRange(n)):!1},v.getOuterText=function(e,t){var n,r,i="",o=v.cloneSelected();return o?(o.collapse(!e),p?(n=o.startContainer.textContent,r=o.startOffset,e&&(r-=t,0>r&&(t+=r,r=0)),i=n.substr(r,t)):(e?o.moveStart(g,0-t):o.moveEnd(g,t),i=o.text),i):""},v.raplaceKeyword=function(e,t,n,i,o,a){n||e.sort(function(e,t){return e[0].length-t[0].length});var l,s,c,u,d,f,h,m,g="[\\s    ]",b=e.length,y=i||e[b-1][0].length;if(o){if(!p)return!1;y++}for(a=a||"",l=v.getOuterText(!0,y),d=l.length,s=l+a,t&&(s+=v.getOuterText(!1,y));b--;)if(h=e[b][0],m=h.length,u=d-1-m,c=o?s.substr(Math.max(0,u-1)).search(new RegExp("(?:"+g+")"+r.regex(h)+"(?="+g+")")):s.indexOf(h,u),c>-1){if(o&&(c+=u+1),c>d||d>c+m+(o?1:0))continue;return f=d-c,v.selectOuterText(f,m-f-(/^\S/.test(a)?1:0)),v.insertHTML(e[b][1]),!0}return!1},v.compare=function(e,t){var n=p?Range.END_TO_END:"EndToEnd",r=p?Range.START_TO_START:"StartToStart",i=p?"compareBoundaryPoints":"compareEndPoints";return t||(t=v.selectedRange()),e&&t?c(e)&&c(t)&&0===e[i](n,t)&&0===e[i](r,t):!e&&!t},v.clear=function(){var e=p?f.getSelection():d.selection;e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())}};return s}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(){"use strict";var e=n(1),t=n(4),r={},i={traverse:function(e,t,n,r,o){if(e)for(e=o?e.lastChild:e.firstChild;e;){var a=o?e.previousSibling:e.nextSibling;if(!n&&t(e)===!1||!r&&i.traverse(e,t,n,r,o)===!1||n&&t(e)===!1)return!1;e=a}},rTraverse:function(e,t,n,r){this.traverse(e,t,n,r,!0)},parseHTML:function(t,n){var r=[],i=(n||document).createElement("div");return i.innerHTML=t,e.merge(r,i.childNodes),r},hasStyling:function(t){var n=e(t);return t&&(!n.is("p,div")||t.className||n.attr("style")||!e.isEmptyObject(n.data()))},convertElement:function(e,n){for(var r,o,a=e.attributes,l=a.length,s=e.ownerDocument.createElement(n);l--;)o=a[l],(!t.ie||o.specified)&&(t.ie<8&&/style/i.test(o.name)?i.copyCSS(e,s):s.setAttribute(o.name,o.value));for(;r=e.firstChild;)s.appendChild(r);return e.parentNode.replaceChild(s,e),s},blockLevelList:"|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|",canHaveChildren:function(e){return/11?|9/.test(e.nodeType)?"|iframe|area|base|basefont|br|col|frame|hr|img|input|isindex|link|meta|param|command|embed|keygen|source|track|wbr|".indexOf("|"+e.nodeName.toLowerCase()+"|")<0:!1},isInline:function(e,t){var n,r=(e||{}).nodeType||3;return 1!==r?3===r:(n=e.tagName.toLowerCase(),"code"===n?!t:i.blockLevelList.indexOf("|"+n+"|")<0)},copyCSS:function(e,t){t.style.cssText=e.style.cssText+t.style.cssText},fixNesting:function(e){var t=function(e){for(;i.isInline(e.parentNode,!0);)e=e.parentNode;return e};i.traverse(e,function(e){if(1===e.nodeType&&!i.isInline(e,!0)&&i.isInline(e.parentNode,!0)){var n=t(e),r=n.parentNode,o=i.extractContents(n,e),a=e;i.copyCSS(n,a),r.insertBefore(o,n),r.insertBefore(a,n)}})},findCommonAncestor:function(t,n){return e(t).parents().has(e(n)).first()},getSibling:function(e,t){return e?(t?e.previousSibling:e.nextSibling)||i.getSibling(e.parentNode,t):null},removeWhiteSpace:function(t,n){for(var r,o,a,l,s,c,u,d,f=i.getSibling,p=i.isInline,h=t.firstChild;h;){if(u=h.nextSibling,r=h.nodeValue,o=h.nodeType,1===o&&h.firstChild&&(c=e(h).css("whiteSpace"),/pre(\-wrap)?$/i.test(c)||i.removeWhiteSpace(h,/line$/i.test(c))),3===o&&r){for(a=f(h),l=f(h,!0),d=!1;e(l).hasClass("sceditor-ignore");)l=f(l,!0);if(p(h)&&l){for(s=l;s.lastChild;)s=s.lastChild;d=3===s.nodeType?/[\t\n\r ]$/.test(s.nodeValue):!p(s)}r=r.replace(/\u200B/g,""),l&&p(l)&&!d||(r=r.replace(n?/^[\t ]+/:/^[\t\n\r ]+/,"")),a&&p(a)||(r=r.replace(n?/[\t ]+$/:/[\t\n\r ]+$/,"")),r.length?h.nodeValue=r.replace(n?/[\t ]+/g:/[\t\n\r ]+/g," "):t.removeChild(h)}h=u}},extractContents:function(t,n){var r,o=i.findCommonAncestor(t,n).get(0),a=!1,l=!1;return(r=function(o){var s,c=t.ownerDocument.createDocumentFragment();return i.traverse(o,function(i){return l||i===n?(l=!0,!1):(i===t&&(a=!0),void(e.contains(i,t)||a&&e.contains(i,n)?(s=i.cloneNode(!1),s.appendChild(r(i)),c.appendChild(s)):a&&!e.contains(c,i)&&c.appendChild(i)))},!1),c})(o)},getOffset:function(e){for(var t=0,n=0;e;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{left:t,top:n}},getStyle:function(t,n){var i,o,a,l=t.style;if(!l)return"";if(r[n]||(r[n]=e.camelCase(n)),n=r[n],a=l[n],"textAlign"===n){if(i=e(t),o=l.direction,a=a||i.css(n),i.parent().css(n)===a||"block"!==i.css("display")||i.is("hr")||i.is("th"))return"";if(o&&a&&(/right/i.test(a)&&"rtl"===o||/left/i.test(a)&&"ltr"===o))return""}return a},hasStyle:function(t,n,r){var o=i.getStyle(t,n);return o?!r||o===r||e.isArray(r)&&e.inArray(o,r)>-1:!1}};return i}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))},function(e,t,n){var r;r=function(){"use strict";var e={html:'<!DOCTYPE html><html{attrs}><head><style>.ie * {min-height: auto !important} .ie table td {height:15px}</style><meta http-equiv="Content-Type" content="text/html;charset={charset}" /><link rel="stylesheet" type="text/css" href="{style}" /></head><body contenteditable="true" {spellcheck}><p></p></body></html>',toolbarButton:'<a class="sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><div unselectable="on">{dispName}</div></a>',emoticon:'<img src="{url}" data-sceditor-emoticon="{key}" alt="{key}" title="{tooltip}" />',fontOpt:'<a class="sceditor-font-option" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',pastetext:'<div><label for="txt">{label}</label> <textarea cols="20" rows="7" id="txt"></textarea></div><div><input type="button" class="button" value="{insert}" /></div>',table:'<div><label for="rows">{rows}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{cols}</label><input type="text" id="cols" value="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',image:'<div><label for="link">{url}</label> <input type="text" id="image" placeholder="http://" /></div><div><label for="width">{width}</label> <input type="text" id="width" size="2" /></div><div><label for="height">{height}</label> <input type="text" id="height" size="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',email:'<div><label for="email">{label}</label> <input type="text" id="email" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{insert}" /></div>',link:'<div><label for="link">{url}</label> <input type="text" id="link" placeholder="http://" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{ins}" /></div>',youtubeMenu:'<div><label for="link">{label}</label> <input type="text" id="link" placeholder="http://" /></div><div><input type="button" class="button" value="{insert}" /></div>',youtube:'<iframe width="560" height="315" src="http://www.youtube.com/embed/{id}?wmode=opaque" data-youtube-id="{id}" frameborder="0" allowfullscreen></iframe>'};return function(t,n,r){var i=e[t];return $.each(n,function(e,t){i=i.replace(new RegExp("\\{"+e+"\\}","g"),t)}),r&&(i=$(i)),i}}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}]),function(e,t,n){"use strict";var r=e.sceditor,i=r.plugins,o=r.escapeEntities,a=r.escapeUriScheme,l=r.ie,s=l&&11>l,c=r.command.get,u={bold:{txtExec:["[b]","[/b]"]},italic:{txtExec:["[i]","[/i]"]},underline:{txtExec:["[u]","[/u]"]},strike:{txtExec:["[s]","[/s]"]},subscript:{txtExec:["[sub]","[/sub]"]},superscript:{txtExec:["[sup]","[/sup]"]},left:{txtExec:["[align=left]","[/align]"]},center:{txtExec:["[align=center]","[/align]"]},right:{txtExec:["[align=right]","[/align]"]},justify:{txtExec:["[align=justify]","[/align]"]},font:{txtExec:function(e){var t=this;c("font")._dropDown(t,e,function(e){t.insertText("[font="+e+"]","[/font]")})}},size:{txtExec:function(t){var n=this,r=["xx-small","x-small","small","medium","large","x-large","xx-large"];e.sceditor.command.get("size")._dropDown(n,t,function(e){e=~~e,e=e>7?7:1>e?1:e,n.insertText("[size="+r[e-1]+"]","[/size]")})}},color:{txtExec:function(e){var t=this;c("color")._dropDown(t,e,function(e){t.insertText("[color="+e+"]","[/color]")})}},bulletlist:{txtExec:["[list]\n[*]","\n[/list]"]},orderedlist:{txtExec:["[list=1]\n[*]","\n[/list]"]},table:{txtExec:["[table][tr][td]","[/td][/tr][/table]"]},horizontalrule:{txtExec:["[hr]"]},code:{txtExec:["[code]","[/code]"]},image:{txtExec:function(e,t){var n=this,r=prompt(n._("Enter the image URL:"),t);r&&n.insertText("[img]"+r+"[/img]")}},email:{txtExec:function(e,t){var n=this,r=t&&t.indexOf("@")>-1?null:t,i=prompt(n._("Enter the e-mail address:"),r?"":t),o=prompt(n._("Enter the displayed text:"),r||i)||i;i&&n.insertText("[email="+i+"]"+o+"[/email]")}},link:{txtExec:function(t,n){var r=this,i=/^[a-z]+:\/\//i.test(e.trim(n))?null:n,o=prompt(r._("Enter URL:"),i?"http://":e.trim(n)),a=prompt(r._("Enter the displayed text:"),i||o)||o;o&&r.insertText("[url="+o+"]"+a+"[/url]")}},quote:{txtExec:["[quote]","[/quote]"]},youtube:{txtExec:function(e){var t=this;c("youtube")._dropDown(t,e,function(e){t.insertText("[youtube]"+e+"[/youtube]")})}},rtl:{txtExec:["[rtl]","[/rtl]"]},ltr:{txtExec:["[ltr]","[/ltr]"]}},d=function(e){return e?e.replace(/\\(.)/g,"$1").replace(/^(["'])(.*?)\1$/,"$2"):e},f=function(){var e,t=arguments;return t[0].replace(/\{(\d+)\}/g,function(n,r){return t[r-0+1]!==e?t[r-0+1]:"{"+r+"}"})},p={OPEN:"open",CONTENT:"content",NEWLINE:"newline",CLOSE:"close"},h=function(e,t,n,r,i,o){var a=this;a.type=e,a.name=t,a.val=n,a.attrs=r||{},a.children=i||[],a.closing=o||null};h.prototype={clone:function(e){var t=this;return new h(t.type,t.name,t.val,t.attrs,e?t.children:[],t.closing?t.closing.clone():null)},splitAt:function(t){var n,r=this,i=0,o=r.children.length;if("number"!=typeof t&&(t=e.inArray(t,r.children)),0>t||t>o)return null;for(;o--;)o>=t?i++:o=0;return n=r.clone(),n.children=r.children.splice(t,i),n}};var m=function(t){if(!(this instanceof m))return new m(t);var r,a,c,u,f,g,v,b,y,x,w,C,k,E,S,T=this;r=function(){T.bbcodes=i.bbcode.bbcodes,T.opts=e.extend({},m.defaults,t)},T.tokenize=function(e){var t,n,r,i=[],o=[{type:p.CLOSE,regex:/^\[\/[^\[\]]+\]/},{type:p.OPEN,regex:/^\[[^\[\]]+\]/},{type:p.NEWLINE,regex:/^(\r\n|\r|\n)/},{type:p.CONTENT,regex:/^([^\[\r\n]+|\[)/}];o.reverse();e:for(;e.length;){for(r=o.length;r--;)if(n=o[r].type,(t=e.match(o[r].regex))&&t[0]){i.push(a(n,t[0])),e=e.substr(t[0].length);continue e}e.length&&i.push(a(p.CONTENT,e)),e=""}return i},a=function(t,n){var r,o,a,l=/\[([^\]\s=]+)(?:([^\]]+))?\]/,s=/\[\/([^\[\]]+)\]/;return t===p.OPEN&&(r=n.match(l))&&(a=E(r[1]),r[2]&&(r[2]=e.trim(r[2]))&&(o=c(r[2]))),t===p.CLOSE&&(r=n.match(s))&&(a=E(r[1])),t===p.NEWLINE&&(a="#newline"),a&&(t!==p.OPEN&&t!==p.CLOSE||i.bbcode.bbcodes[a])||(t=p.CONTENT,a="#"),new h(t,a,n,o)},c=function(e){var t,n=/([^\s=]+)=(?:(?:(["'])((?:\\\2|[^\2])*?)\2)|((?:.(?!\s\S+=))*.))/g,r={};if("="===e.charAt(0)&&e.indexOf("=",1)<0)r.defaultattr=d(e.substr(1));else for("="===e.charAt(0)&&(e="defaultattr"+e);t=n.exec(e);)r[E(t[1])]=d(t[3])||t[4];return r},T.parse=function(e,t){var n=u(T.tokenize(e)),r=T.opts;return r.fixInvalidChildren&&y(n),r.removeEmptyTags&&b(n),r.fixInvalidNesting&&g(n),f(n,null,t),r.removeEmptyTags&&b(n),n},C=function(e,t,n){for(var r=n.length;r--;)if(n[r].type===t&&n[r].name===e)return!0;return!1},v=function(t,n){var r=t?T.bbcodes[t.name]:{},i=r.allowedChildren;return T.opts.fixInvalidChildren&&i?e.inArray(n.name||"#",i)>-1:!0},u=function(t){for(var n,r,i,o,a,l,s,c=[],u=[],d=[],f=function(){return S(d)},h=function(e){f()?f().children.push(e):u.push(e)},m=function(t){return f()&&(r=T.bbcodes[f().name])&&r.closedBy&&e.inArray(t,r.closedBy)>-1};n=t.shift();){switch(s=t[0],n.type){case p.OPEN:m(n.name)&&d.pop(),h(n),r=T.bbcodes[n.name],r&&r.isSelfClosing||!r.closedBy&&!C(n.name,p.CLOSE,t)?r&&r.isSelfClosing||(n.type=p.CONTENT):d.push(n);break;case p.CLOSE:if(f()&&n.name!==f().name&&m("/"+n.name)&&d.pop(),f()&&n.name===f().name)f().closing=n,d.pop();else if(C(n.name,p.OPEN,d)){for(;i=d.pop();){if(i.name===n.name){i.closing=n;break}o=i.clone(),c.length>1&&o.children.push(S(c)),c.push(o)}for(h(S(c)),a=c.length;a--;)d.push(c[a]);c.length=0}else n.type=p.CONTENT,h(n);break;case p.NEWLINE:f()&&s&&m((s.type===p.CLOSE?"/":"")+s.name)&&(s.type!==p.CLOSE||s.name!==f().name)&&(r=T.bbcodes[f().name],r&&r.breakAfter?d.pop():r&&r.isInline===!1&&T.opts.breakAfterBlock&&r.breakAfter!==!1&&d.pop()),h(n);break;default:h(n)}l=n}return u},f=function(e,t,n){var r,i,o,a,l,s,c,u,d=e.length;t&&(a=T.bbcodes[t.name]);for(var h=d;h--;)if(r=e[h])if(r.type===p.NEWLINE){if(i=h>0?e[h-1]:null,o=d-1>h?e[h+1]:null,u=!1,!n&&a&&a.isSelfClosing!==!0&&(i?s||o||(a.isInline===!1&&T.opts.breakEndBlock&&a.breakEnd!==!1&&(u=!0),a.breakEnd&&(u=!0),s=u):(a.isInline===!1&&T.opts.breakStartBlock&&a.breakStart!==!1&&(u=!0),a.breakStart&&(u=!0))),i&&i.type===p.OPEN&&(l=T.bbcodes[i.name])&&(n?l.isInline===!1&&(u=!0):(l.isInline===!1&&T.opts.breakAfterBlock&&l.breakAfter!==!1&&(u=!0),l.breakAfter&&(u=!0))),!n&&!c&&o&&o.type===p.OPEN&&(l=T.bbcodes[o.name])&&(l.isInline===!1&&T.opts.breakBeforeBlock&&l.breakBefore!==!1&&(u=!0),l.breakBefore&&(u=!0),c=u,u)){e.splice(h,1);continue}u&&e.splice(h,1),c=!1}else r.type===p.OPEN&&f(r.children,r,n)},g=function(t,n,r,i){var o,a,l,s,c,u,d=function(e){var t=T.bbcodes[e.name];return!t||t.isInline!==!1};for(n=n||[],i=i||t,a=0;a<t.length;a++)if((o=t[a])&&o.type===p.OPEN){if(!d(o)&&r&&(l=S(n),u=l.splitAt(o),c=n.length>1?n[n.length-2].children:i,s=e.inArray(l,c),s>-1))return u.children.splice(e.inArray(o,u.children),1),void c.splice(s+1,0,o,u);n.push(o),g(o.children,n,r||d(o),i),n.pop(o)}},y=function(e,t){for(var n,r,i=e.length;i--;)(n=e[i])&&(v(t,n)||(n.name=null,n.type=p.CONTENT,v(t,n)?(r=[i+1,0].concat(n.children),n.closing&&(n.closing.name=null,n.closing.type=p.CONTENT,r.push(n.closing)),i+=r.length-1,Array.prototype.splice.apply(e,r)):t.children.splice(i,1)),n.type===p.OPEN&&y(n.children,n))},b=function(t){for(var n,r,i=function(e){for(var t=e.length;t--;){var n=e[t].type;if(n===p.OPEN||n===p.CLOSE)return!1;if(n===p.CONTENT&&/\S|\u00A0/.test(e[t].val))return!1}return!0},o=t.length;o--;)(n=t[o])&&n.type===p.OPEN&&(r=T.bbcodes[n.name],b(n.children),i(n.children)&&r&&!r.isSelfClosing&&!r.allowsEmpty&&t.splice.apply(t,e.merge([o,1],n.children)))},T.toHTML=function(e,t){return x(T.parse(e,t),!0)},x=function(t,r){var a,c,u,d,f,h,m,g,v,b=[];for(g=function(e){return(!e||(e.isHtmlInline!==a?e.isHtmlInline:e.isInline))!==!1};t.length>0;)if(c=t.shift()){if(c.type===p.OPEN)v=c.children[c.children.length-1]||{},u=T.bbcodes[c.name],h=r&&g(u),d=x(c.children,!1),u&&u.html?(g(u)||!g(T.bbcodes[v.name])||u.isPreFormatted||u.skipLastLineBreak||s||(d+="<br />"),e.isFunction(u.html)?f=u.html.call(T,c,c.attrs,d):(c.attrs[0]=d,f=i.bbcode.formatBBCodeString(u.html,c.attrs))):f=c.val+d+(c.closing?c.closing.val:"");else{if(c.type===p.NEWLINE){if(!r){b.push("<br />");continue}m||(b.push("<div>"),(8>l||n.documentMode&&n.documentMode<8)&&b.push(" ")),s||b.push("<br />"),t.length||b.push("<br />"),b.push("</div>\n"),m=!1;continue}h=r,f=o(c.val,!0)}h&&!m?(b.push("<div>"),m=!0):!h&&m&&(b.push("</div>\n"),m=!1),b.push(f)}return m&&b.push("</div>\n"),b.join("")},T.toBBCode=function(e,t){return w(T.parse(e,t))},w=function(e){for(var t,n,r,i,o,a,l,s,c,u,d=[];e.length>0;)if(t=e.shift())if(r=T.bbcodes[t.name],i=!(!r||r.isInline!==!1),o=r&&r.isSelfClosing,l=i&&T.opts.breakBeforeBlock&&r.breakBefore!==!1||r&&r.breakBefore,s=i&&!o&&T.opts.breakStartBlock&&r.breakStart!==!1||r&&r.breakStart,c=i&&T.opts.breakEndBlock&&r.breakEnd!==!1||r&&r.breakEnd,u=i&&T.opts.breakAfterBlock&&r.breakAfter!==!1||r&&r.breakAfter,a=(r?r.quoteType:null)||T.opts.quoteType||m.QuoteType.auto,r||t.type!==p.OPEN)if(t.type===p.OPEN){if(l&&d.push("\n"),d.push("["+t.name),t.attrs){t.attrs.defaultattr&&(d.push("=",k(t.attrs.defaultattr,a,"defaultattr")),delete t.attrs.defaultattr);for(n in t.attrs)t.attrs.hasOwnProperty(n)&&d.push(" ",n,"=",k(t.attrs[n],a,n))}d.push("]"),s&&d.push("\n"),t.children&&d.push(w(t.children)),o||r.excludeClosing||(c&&d.push("\n"),d.push("[/"+t.name+"]")),u&&d.push("\n"),t.closing&&o&&d.push(t.closing.val)}else d.push(t.val);else d.push(t.val),t.children&&d.push(w(t.children)),t.closing&&d.push(t.closing.val);return d.join("")},k=function(t,n,r){var i=m.QuoteType,o=/\s|=/.test(t);return e.isFunction(n)?n(t,r):n===i.never||n===i.auto&&!o?t:'"'+t.replace("\\","\\\\").replace('"','\\"')+'"'},S=function(e){return e.length?e[e.length-1]:null},E=function(e){return e.toLowerCase()},r()};m.QuoteType={always:1,never:2,auto:3},m.defaults={breakBeforeBlock:!1,breakStartBlock:!1,breakEndBlock:!1,breakAfterBlock:!0,removeEmptyTags:!0,fixInvalidNesting:!0,fixInvalidChildren:!0,quoteType:m.QuoteType.auto},e.sceditorBBCodePlugin=i.bbcode=function(){var t,o,a,l,c=this;c.bbcodes=i.bbcode.bbcodes,c.stripQuotes=d;var p={},h={},g={ul:["li","ol","ul"],ol:["li","ol","ul"],table:["tr"],tr:["td","th"],code:["br","p","div"]};c.init=function(){c.opts=this.opts,t(),this.commands=e.extend(!0,{},u,this.commands),this.toBBCode=c.signalToSource,this.fromBBCode=c.signalToWysiwyg},t=function(){e.each(c.bbcodes,function(t){var n,r=c.bbcodes[t].tags,i=c.bbcodes[t].styles;r&&e.each(r,function(e,r){n=c.bbcodes[t].isInline===!1,p[e]=p[e]||{},p[e][n]=p[e][n]||{},p[e][n][t]=r}),i&&e.each(i,function(e,r){n=c.bbcodes[t].isInline===!1,h[n]=h[n]||{},h[n][e]=h[n][e]||{},h[n][e][t]=r})})},o=function(t,n,i){var o,a,l=r.dom.getStyle;return i=!!i,h[i]?(e.each(h[i],function(r,i){o=l(t[0],r),o&&l(t.parent()[0],r)!==o&&e.each(i,function(r,i){(!i||e.inArray(o.toString(),i)>-1)&&(a=c.bbcodes[r].format,n=e.isFunction(a)?a.call(c,t,n):f(a,n))})}),n):n},a=function(t,n,i){var o,a,l=t[0],u=l.nodeName.toLowerCase();i=!!i,p[u]&&p[u][i]&&e.each(p[u][i],function(r,i){(!i||(o=!1,e.each(i,function(n,r){return!t.attr(n)||r&&e.inArray(t.attr(n),r)<0?void 0:(o=!0,!1)}),o))&&(a=c.bbcodes[r].format,n=e.isFunction(a)?a.call(c,t,n):f(a,n))});var d=r.dom.isInline;if(i&&(!d(l,!0)||"br"===u)){for(var h,m,g,v=l.previousSibling;v&&(e(v).hasClass("sceditor-ignore")||1===v.nodeType&&!e(v).is("br")&&d(v,!0)&&!v.firstChild);)v=v.previousSibling;do{for(m=l.parentNode,g=m.lastChild;e(g).hasClass("sceditor-ignore");)g=g.previousSibling;h=g===l,l=m}while(m&&h&&d(m,!0));(!h||"li"===u||"br"===u&&s)&&(n+="\n"),"br"!==u&&v&&!e(v).is("br")&&d(v,!0)&&(n="\n"+n)}return n},c.signalToSource=function(t,i){var o,a,l=new m(c.opts.parserOptions);return i||("string"==typeof t?(o=e("<div />").css("visibility","hidden").appendTo(n.body).html(t),i=o):i=e(t)),i&&i.jquery?(r.dom.removeWhiteSpace(i[0]),a=c.elementToBbcode(i),o&&o.remove(),a=l.toBBCode(a,!0),c.opts.bbcodeTrim&&(a=e.trim(a)),a):""},c.elementToBbcode=function(t){var n=function(t,i){var l="";return r.dom.traverse(t,function(t){var r=e(t),c="",u=t.nodeType,d=t.nodeName.toLowerCase(),f=g[d],p=t.firstChild,h=!0;if("object"==typeof i&&(h=e.inArray(d,i)>-1,r.is("img")&&r.data("sceditor-emoticon")&&(h=!0),h||(f=i)),3===u||1===u)if(1===u){if(r.hasClass("sceditor-ignore"))return;if(r.hasClass("sceditor-nlf")&&(!p||!s&&1===t.childNodes.length&&/br/i.test(p.nodeName)))return;"iframe"!==d&&(c=n(t,f)),h?("code"!==d&&(c=o(r,c),c=a(r,c),c=o(r,c,!0)),l+=a(r,c,!0)):l+=c}else l+=t.nodeValue},!1,!0),l};return n(t[0])},c.signalToWysiwyg=function(t,n){var r=new m(c.opts.parserOptions),i=r.toHTML(c.opts.bbcodeTrim?e.trim(t):t);return n?l(i):i},l=function(t){var i,o,a,l=e("<div />").hide().appendTo(n.body),c=l[0];return a=function(t,i){if(!r.dom.hasStyling(t)){if(s||1!==t.childNodes.length||!e(t.firstChild).is("br"))for(;o=t.firstChild;)c.insertBefore(o,t);if(i){var a=c.lastChild;t!==a&&e(a).is("div")&&t.nextSibling===a&&c.insertBefore(n.createElement("br"),t)}c.removeChild(t)}},c.innerHTML=t.replace(/<\/div>\n/g,"</div>"),(i=c.firstChild)&&e(i).is("div")&&a(i,!0),(i=c.lastChild)&&e(i).is("div")&&a(i),c=c.innerHTML,l.remove(),c}},i.bbcode.formatBBCodeString=function(e,t){return e.replace(/\{([^}]+)\}/g,function(e,n){var r,i=!0;return"!"===n.charAt(0)&&(i=!1,n=n.substring(1)),"0"===n&&(i=!1),t[n]===r?e:i?o(t[n],!0):t[n]})};var g=function(e){return e=parseInt(e,10),isNaN(e)?"00":(e=Math.max(0,Math.min(e,255)).toString(16),e.length<2?"0"+e:e)},v=function(e){var t;return e=e||"#000",(t=e.match(/rgb\((\d{1,3}),\s*?(\d{1,3}),\s*?(\d{1,3})\)/i))?"#"+g(t[1])+g(t[2]-0)+g(t[3]-0):(t=e.match(/#([0-f])([0-f])([0-f])\s*?$/i))?"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:e
},b={b:{tags:{b:null,strong:null},styles:{"font-weight":["bold","bolder","401","700","800","900"]},format:"[b]{0}[/b]",html:function(e,t,n){return t.defaultattr?"[b="+o(t.defaultattr)+"]"+n+"[/b]":"<strong>"+n+"</strong>"}},i:{tags:{i:null,em:null},styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:function(e,t,n){return t.defaultattr?"[i="+o(t.defaultattr)+"]"+n+"[/i]":"<em>"+n+"</em>"}},u:{tags:{u:null},styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:function(e,t,n){return t.defaultattr?"[u="+o(t.defaultattr)+"]"+n+"[/u]":"<u>"+n+"</u>"}},s:{tags:{s:null,strike:null},styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:function(e,t,n){return t.defaultattr?"[s="+o(t.defaultattr)+"]"+n+"[/s]":"<s>"+n+"</s>"}},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:function(e,t,n){return t.defaultattr?"[sub="+o(t.defaultattr)+"]"+n+"[/sub]":"<sub>"+n+"</sub>"}},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:function(e,t,n){return t.defaultattr?"[sup="+o(t.defaultattr)+"]"+n+"[/sup]":"<sup>"+n+"</sup>"}},font:{tags:{font:{face:null}},styles:{"font-family":null},quoteType:m.QuoteType.never,format:function(e,t){var n;return"font"===e[0].nodeName.toLowerCase()&&(n=e.attr("face"))||(n=e.css("font-family")),"string"==typeof n&&""!=n&&"defaultattr"!=n?"[font="+d(n)+"]"+t+"[/font]":t},html:function(e,t,n){return"string"==typeof t.defaultattr&&""!=t.defaultattr&&"{defaultattr}"!=t.defaultattr?'<font face="'+t.defaultattr+'">'+n+"</font>":n}},size:{tags:{font:{size:null}},styles:{"font-size":null},format:function(e,t){var n,r=["xx-small","x-small","small","medium","large","x-large","xx-large"],i=e.data("scefontsize");return i||(n=e.css("fontSize"),n.indexOf("px")>-1?(n=n.replace("px","")-0,i=1,n>9&&(i=2),n>12&&(i=3),n>15&&(i=4),n>17&&(i=5),n>23&&(i=6),n>31&&(i=7)):i=~~n+1,i>7&&(i=7),1>i&&(i=1),i=r[i-1]),"[size="+i+"]"+t+"[/size]"},html:function(e,t,n){return'<span data-scefontsize="'+t.defaultattr+'" style="font-size:'+t.defaultattr+'">'+n+"</span>"}},color:{tags:{font:{color:null}},styles:{color:null},quoteType:m.QuoteType.never,format:function(e,t){var n;return e.is("font")&&(n=e.attr("color"))||(n=e[0].style.color||e.css("color")),"[color="+v(n)+"]"+t+"[/color]"},html:function(e,t,n){return'<font color="'+o(v(t.defaultattr),!0)+'">'+n+"</font>"}},ul:{tags:{ul:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[list]{0}[/list]",html:"<ul>{0}</ul>"},list:{breakStart:!0,isInline:!1,skipLastLineBreak:!0,breakAfter:!1,html:function(e,t,n){var r="1"===t.defaultattr?"ol":"ul";return"a"===t.defaultattr&&(r='ol type="a"'),"<"+r+">"+n+"</"+r+">"}},ol:{tags:{ol:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:function(e,t){var n="a"===e.attr("type")?"a":"1";return"[list="+n+"]"+t+"[/list]"},html:"<ol>{0}</ol>"},li:{tags:{li:null},isInline:!1,excludeClosing:!0,closedBy:["/ul","/ol","/list","*","li"],format:"[*]{0}",html:function(e,t,n){return t.defaultattr?"[*="+o(t.defaultattr)+"]"+n:"<li>"+n+"</li>"}},"*":{isInline:!1,excludeClosing:!0,closedBy:["/ul","/ol","/list","*","li"],html:function(e,t,n){return t.defaultattr?"[*="+o(t.defaultattr)+"]"+n:"<li>"+n+"</li>"}},table:{tags:{table:null},isInline:!1,isHtmlInline:!0,skipLastLineBreak:!0,format:"[table]{0}[/table]",html:function(e,t,n){return t.defaultattr?"[table="+o(t.defaultattr)+"]"+n+"[/table]":"<table>"+n+"</table>"}},tr:{tags:{tr:null},isInline:!1,skipLastLineBreak:!0,format:"[tr]{0}[/tr]",html:function(e,t,n){return t.defaultattr?"[tr="+o(t.defaultattr)+"]"+n+"[/tr]":"<tr>"+n+"</tr>"}},th:{tags:{th:null},allowsEmpty:!0,isInline:!1,format:"[th]{0}[/th]",html:function(e,t,n){return t.defaultattr?"[th="+o(t.defaultattr)+"]"+n+"[/th]":"<th>"+n+"</th>"}},td:{tags:{td:null},allowsEmpty:!0,isInline:!1,format:"[td]{0}[/td]",html:function(e,t,n){return t.defaultattr?"[td="+o(t.defaultattr)+"]"+n+"[/td]":"<td>"+n+"</td>"}},emoticon:{allowsEmpty:!0,tags:{img:{src:null,"data-sceditor-emoticon":null}},format:function(e,t){return e.data("sceditor-emoticon")+t},html:"{0}"},hr:{tags:{hr:null},allowsEmpty:!0,isSelfClosing:!0,isInline:!1,format:"[hr]{0}",html:function(e,t,n){return t.defaultattr?"[hr="+o(t.defaultattr)+"]"+n:"<hr />"}},img:{allowsEmpty:!0,tags:{img:{src:null}},allowedChildren:["#"],quoteType:m.QuoteType.never,format:function(e,t){var n,r,i="",o=e[0],a=function(e){return o.style?o.style[e]:null};return e.attr("data-sceditor-emoticon")?t:(n=e.attr("width")||a("width"),r=e.attr("height")||a("height"),(o.complete&&(n||r)||n&&r)&&(i="="+e.width()+"x"+e.height()),"[img"+i+"]"+e.attr("src")+"[/img]")},html:function(e,t,n){var r,i,l,s,c="";return i=t.width,l=t.height,t.defaultattr&&(s=t.defaultattr.split(/x/i),i=s[0],l=2===s.length?s[1]:s[0]),i!==r&&(c+=' width="'+o(i,!0)+'"'),l!==r&&(c+=' height="'+o(l,!0)+'"'),"<img"+c+' src="'+a(n)+'" />'}},url:{allowsEmpty:!0,tags:{a:{href:null}},quoteType:m.QuoteType.never,format:function(e,t){var n=e.attr("href");return"mailto:"===n.substr(0,7)?'[email="'+n.substr(7)+'"]'+t+"[/email]":"[url="+n+"]"+t+"[/url]"},html:function(e,t,n){return t.defaultattr=o(t.defaultattr,!0)||n,'<a href="'+a(t.defaultattr)+'">'+n+"</a>"}},email:{quoteType:m.QuoteType.never,html:function(e,t,n){return'<a href="mailto:'+(o(t.defaultattr,!0)||n)+'">'+n+"</a>"}},quote:{tags:{blockquote:null},isInline:!1,breakStart:!0,breakEnd:!0,quoteType:function(e){return"'"+e.replace("'","\\'")+"'"},format:function(t,n){var r="",i=e(t),o=i.children("cite").first();return o.html(o.text()),(1===o.length||i.data("author"))&&(r=o.text()||i.data("author"),i.data("author",r),o.remove(),n=this.elementToBbcode(e(t)),r="="+r.replace(/(^\s+|\s+$)/g,""),i.prepend(o)),i.data("pid")&&(r+=" pid='"+i.data("pid")+"'"),i.data("dateline")&&(r+=" dateline='"+i.data("dateline")+"'"),"[quote"+r+"]"+n+"[/quote]"},html:function(e,t,n){var r="";return t.pid&&(r+=' data-pid="'+t.pid+'"'),t.dateline&&(r+=' data-dateline="'+t.dateline+'"'),"undefined"!=typeof t.defaultattr&&(n="<cite>"+t.defaultattr.replace(/ /g,"&nbsp;")+"</cite>"+n),"<blockquote"+r+">"+n+"</blockquote>"}},code:{tags:{code:null},allowsEmpty:!0,isInline:!1,skipLastLineBreak:!0,allowedChildren:["#","#newline"],format:function(t,n){return e(t[0]).hasClass("phpcodeblock")?"[php]"+n+"[/php]":"[code]"+n+"[/code]"},html:function(e,t,n){return t.defaultattr?"[code="+o(t.defaultattr)+"]"+n+"[/code]":"<code>"+n+"</code>"}},left:{styles:{"text-align":["left","-webkit-left","-moz-left","-khtml-left"]},isInline:!1,format:"[align=left]{0}[/align]",html:'<div align="left">{0}</div>'},center:{styles:{"text-align":["center","-webkit-center","-moz-center","-khtml-center"]},isInline:!1,format:"[align=center]{0}[/align]",html:'<div align="center">{0}</div>'},right:{styles:{"text-align":["right","-webkit-right","-moz-right","-khtml-right"]},isInline:!1,format:"[align=right]{0}[/align]",html:'<div align="right">{0}</div>'},justify:{styles:{"text-align":["justify","-webkit-justify","-moz-justify","-khtml-justify"]},isInline:!1,format:"[align=justify]{0}[/align]",html:'<div align="justify">{0}</div>'},youtube:{allowsEmpty:!0,tags:{iframe:{"data-youtube-id":null}},format:function(e,t){return e=e.attr("data-youtube-id"),e?"[youtube]"+e+"[/youtube]":t},html:function(e,t,n){return t.defaultattr?"[youtube="+o(t.defaultattr)+"]"+n+"[/youtube]":'<iframe width="560" height="315" frameborder="0" src="http://www.youtube.com/embed/{0}?wmode=opaque" data-youtube-id="{0}" allowfullscreen></iframe>'}},rtl:{styles:{direction:["rtl"]},format:"[rtl]{0}[/rtl]",html:function(e,t,n){return t.defaultattr?"[rtl="+o(t.defaultattr)+"]"+n+"[/rtl]":'<div align="direction: rtl">'+n+"</div>"}},ltr:{styles:{direction:["ltr"]},format:"[ltr]{0}[/ltr]",html:function(e,t,n){return t.defaultattr?"[ltr="+o(t.defaultattr)+"]"+n+"[/ltr]":'<div align="direction: ltr">'+n+"</div>"}},ignore:{}};i.bbcode.bbcode={get:function(e){return b[e]||null},set:function(t,n){return t&&n?(n=e.extend(b[t]||{},n),n.remove=function(){delete b[t]},b[t]=n,this):!1},rename:function(e,t){return e in b?(b[t]=b[e],delete b[e],this):!1},remove:function(e){return e in b&&delete b[e],this}},e.fn.sceditorBBCodePlugin=function(t){return t=t||{},e.isPlainObject(t)&&(t.plugins=(t.plugins||"")+"bbcode"),this.sceditor(t)},i.bbcode.normaliseColour=v,i.bbcode.formatString=f,i.bbcode.stripQuotes=d,i.bbcode.bbcodes=b,r.BBCodeParser=m}(jQuery,window,document);